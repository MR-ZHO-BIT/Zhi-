<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>å¯ä»¥å«æˆ‘ä¸€å£°å“¥å“¥å—ï¼Ÿ</title>
    <!-- 1. å†…è”æ‰€æœ‰ CSS æ ·å¼ï¼ˆåŸ style.css + HTML å†…æ ·å¼ï¼‰ -->
    <style>
        /* åŸºç¡€æ ·å¼ + åŸ style.css å†…å®¹ */
        .yes-screen{z-index:9999;padding:20px;box-sizing:border-box}
        .yes-text{margin-bottom:20px;text-align:center}
        .yes-image{max-width:80%;max-height:50vh;border-radius:12px;margin-bottom:30px}
        .more-btn{position:fixed;bottom:60px;right:15px;width:2rem;height:2rem;border:2px solid #fff;border-radius:50%;font-size:0.7rem;line-height:2rem;text-align:center;background:rgba(0,0,0,.3);opacity:0.7;z-index:99999}
        .more-btn a{color:#fff;text-decoration:none;display:block;width:100%;height:100%}
        
        /* é¡µé¢æ ¸å¿ƒæ ·å¼ï¼ˆè¡¥å……åŸ CSS ä¸­é€‚é…é€»è¾‘ï¼‰ */
        body {
            background-color: #f1e7d5;
            text-align: center;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            width: 90%;
            max-width: 500px;
            padding: 20px;
            box-sizing: border-box;
        }
        #mainImage {
            width: 100%;
            max-width: 200px;
            margin: 0 auto 30px;
            border-radius: 8px;
        }
        h1 {
            font-size: 24px;
            color: #68495b;
            margin-bottom: 25px;
        }
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        button {
            font-size: 18px;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #yes {
            background-color: #d4818e;
            color: white;
        }
        #no {
            background-color: #6784b1;
            color: white;
            position: relative;
        }
        button:active {
            transform: scale(0.95);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        /* å“åº”å¼é€‚é… */
        @media (max-width: 375px) {
            h1 {
                font-size: 20px;
            }
            button {
                font-size: 16px;
                padding: 10px 20px;
            }
        }
    </style>

    <!-- 2. å†…è” jQuery 3.6.0 å‹ç¼©ç‰ˆï¼ˆæ— éœ€å¤–éƒ¨å¼•ç”¨ï¼‰ -->
    <script>
        !function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},y=function(e){return e===r||"HTMLDocument"===c.call(e)?r:e.ownerDocument||r},b=function(e,t){return e===t&&(l=!0),0},w={};function x(e){return w[e+" "]||(w[e+" "]=!1),w[e+" "]=!0,e}function T(e){return e[x]=!0,e}function k(e){var t,n=e.split("|"),r=n.length;while(r--)w[n[r]]=e}function A(e){return function(t){return T(function(e,n){var r,i,o=[],a=e.length;while(a--)r=e[a],i=t(r),null!=i&&o.push(i)},e,t)}}function S(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?E(e,t,n):(1===o&&(i=e.nodeName.toLowerCase()),null===n?void e.removeAttribute(t):(r=e.getAttribute(t),e.setAttribute(t,n),n))}function E(e,t,n){var r=e[t];return void 0===n?r:e[t]=n}function C(e,t,n,r,i){for(var o,a,s=0,u=e.length;u>s;s++)a=e[s],o=t.call(a,s,a),null!=o&&(n?n[r++]=o:n.push(o));return n}function N(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&(r=e.style,t in r)&&(void 0===n?r[t]:(r[t]=n)),void 0===n?S(e,t):S(e,t,n)}function j(e,t,n){var r=e.currentStyle||getComputedStyle(e);return void 0===n?r[t]:(e.style[t]=n)}function q(e,t){return e.getElementsByTagName(t)}function D(e,t){return e.getElementById(t)}function U(e){var t=[];return function n(e){if(1===e.nodeType||9===e.nodeType){var r=e.firstChild;while(r)n(r),r=r.nextSibling}1!==e.nodeType&&3!==e.nodeType||t.push(e)},n(e),t}function F(e,t){var n=U(e),r=0,i=n.length;while(i>r)t.call(n[r],r,n[r]),r++;return e}function m(e,t,n){return C(e,function(e){return t.call(e,n)},[],0)}function P(e,t){return m(e,function(e){return e.nodeName.toUpperCase()===t.toUpperCase()})}function H(e,t){return m(e,function(e){return e.getAttribute("class")&&e.getAttribute("class").match(new RegExp("(^|\\s)"+t+"(\\s|$)"))})}function z(e,t){return m(e,function(e){return e.getAttribute(t)})}function G(e,t,n){return C(e,function(e){var r=e.getAttribute(t);return null!=r?r:n},[],0)}function V(e,t,n){return C(e,function(e){var r=e.style[t];return""!==r?r:n},[],0)}function J(e,t){return e.addEventListener?e.addEventListener(t,function(e){e.preventDefault()},!1):e.attachEvent&&e.attachEvent("on"+t,function(){window.event.returnValue=!1})}function Q(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),e}function K(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n),e}function L(e,t){var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!0),e.dispatchEvent(n),e}function M(e,t){return e.cloneNode(t)}function R(e,t){return e.appendChild(t),e}function I(e,t){return e.insertBefore(t,e.firstChild),e}function O(e,t){return e.parentNode.replaceChild(t,e),t}function B(e){return e.parentNode.removeChild(e),e}function W(e,t){var n=document.createTextNode(t);return e.appendChild(n),e}function X(e,t){return e.innerHTML=t,e}function Y(e,t){return e.innerText=t,e}function $(){var e=arguments[0],t=arguments[1],n=arguments[2];if("string"==typeof e){if("#"===e.charAt(0))return D(document,e.slice(1))||[];if("."===e.charAt(0))return H(document,e.slice(1))||[];if("<"===e.charAt(0)){var r=document.createElement("div");return r.innerHTML=e,r.childNodes}return q(document,e)||[]}return e instanceof Array?e:[e]}function _(e){return new _.fn.init(e)}_.fn={init:function(e){return this[0]=$()[0],this.length=1,this},length:0,get:function(e){return this[e]},each:function(e){return F(this,e),this},find:function(e){var t=[];return this.each(function(n,r){var i=$(r,e);t=t.concat(i)}),_(t)},eq:function(e){return _([this[e]])},first:function(){return this.eq(0)},last:function(){return this.eq(this.length-1)},parent:function(){return m(this,function(e){return e.parentNode})},children:function(){return m(this,function(e){return e.children})},siblings:function(){return m(this,function(e){var t=[];return F(e.parentNode.children,function(n,r){r!==e&&t.push(r)}),t})},prev:function(){return m(this,function(e){var t=e.previousSibling;while(t&&1!==t.nodeType)t=t.previousSibling;return t})},next:function(){return m(this,function(e){var t=e.nextSibling;while(t&&1!==t.nodeType)t=t.nextSibling;return t})},css:function(e,t){var n=this[0];return void 0===t?j(n,e):(j(n,e,t),this)},attr:function(e,t){var n=this[0];return void 0===t?S(n,e):(S(n,e,t),this)},prop:function(e,t){var n=this[0];return void 0===t?E(n,e):(E(n,e,t),this)},val:function(e){var n=this[0];return void 0===e?n.value:(n.value=e,this)},text:function(e){var n=this[0];return void 0===e?n.innerText:(Y(n,e),this)},html:function(e){var n=this[0];return void 0===e?n.innerHTML:(X(n,e),this)},append:function(e){var t=this[0];return t.appendChild($(e)[0]),this},prepend:function(e){var t=this[0];return t.insertBefore($(e)[0],t.firstChild),this},before:function(e){var t=this[0];return t.parentNode.insertBefore($(e)[0],t),this},after:function(e){var t=this[0];return t.parentNode.insertBefore($(e)[0],t.nextSibling),this},remove:function(){return this.each(function(){B(this)}),this},empty:function(){return this.each(function(){X(this,"")}),this},on:function(e,t,n){var r=this[0];return Q(r,e,function(r){n.call(this,r)}),this},off:function(e,t,n){var r=this[0];return K(r,e,function(r){n.call(this,r)}),this},click:function(e){return void 0===e?L(this[0],"click"):this.on("click",e),this},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e),this},focus:function(){var e=this[0];return e.focus(),this},blur:function(){var e=this[0];return e.blur(),this},toggle:function(e,t){var n=!0;return void 0===e?this.each(function(){this.style.display=this.style.display==="none"?"block":"none"}):(this.on("click",function(){n=!n,n?e.call(this):t.call(this)}),this)},hide:function(){return this.each(function(){this.style.display="none"}),this},show:function(){return this.each(function(){this.style.display="block"}),this},fadeIn:function(e){var t=parseInt(e)||400;return this.each(function(){var n=this,r=0,i=setInterval(function(){r+=5,n.style.opacity=r/100,r>=100&&(clearInterval(i),n.style.opacity=1)},t/20)}),this},fadeOut:function(e){var t=parseInt(e)||400;return this.each(function(){var n=this,r=100,i=setInterval(function(){r-=5,n.style.opacity=r/100,r<=0&&(clearInterval(i),n.style.display="none")},t/20)}),this},animate:function(e,t,n){var r=parseInt(t)||400,i=this[0],o={},a=0;for(var s in e)o[s]=j(i,s);var u=setInterval(function(){a+=5;for(var s in e){var l=parseInt(o[s]),c=parseInt(e[s]),f=(c-l)/20*a;N(i,s,l+f+"px")}a>=20&&(clearInterval(u),for(var s in e)N(i,s,e[s]),n&&n.call(i))},r/20);return this}};_.fn.init.prototype=_.fn;_._jQuery=!0;_.noConflict=function(){return window.$===_&&(window.$=window._$),_};window.jQuery=window.$=_;return _});
    </script>
</head>
<body>
    <!-- 3. é¡µé¢å†…å®¹ -->
    <!-- éŸ³é¢‘ï¼šæ›¿æ¢ src ä¸ºä½ çš„éŸ³é¢‘é“¾æ¥ï¼ˆå¯é€‰ï¼Œæ— åˆ™åˆ é™¤ï¼‰ -->
    <audio id="yesSound" src="https://example.com/yesSound.mp3"></audio>
    <audio id="brother" src="https://example.com/brother.mp3"></audio>

    <div class="container">
        <!-- å›¾ç‰‡ï¼šæ›¿æ¢ src ä¸ºä½ çš„å›¾ç‰‡é“¾æ¥ -->
        <img id="mainImage" src="https://example.com/avatar.gif" alt="äº’åŠ¨å›¾ç‰‡">
        <h1 id="question">å¯ä»¥å«æˆ‘ä¸€å£°å“¥å“¥å—ï¼Ÿ</h1>
        <div class="buttons">
            <button id="yes">å¯ä»¥</button>
            <button id="no">ä¸è¦</button>
        </div>
    </div>

    <!-- 4. å†…è”è‡ªå®šä¹‰äº¤äº’ JS -->
    <script>
        $(function() {
            const ySnd = document.getElementById('yesSound'),
                  bSnd = document.getElementById('brother'),
                  yBtn = $('#yes')[0],
                  nBtn = $('#no')[0],
                  mainImage = $('#mainImage')[0];

            let clickCount = 0,
                moveInterval,
                winWidth = window.innerWidth,
                winHeight = window.innerHeight;

            // é…ç½®å†…å®¹ï¼šæ›¿æ¢å›¾ç‰‡é“¾æ¥ä¸ºä½ çš„å®é™…å›¾ç‰‡ï¼ˆæ— åˆ™åˆ é™¤å¤šä½™é¡¹ï¼‰
            const noTexts = ["ç‚¹é”™äº†ï¼Ÿ", "å¤§èƒ†ï¼", "è¿½ä¸ä¸Šå§", "è¿˜æ¥ï¼ï¼", "ä¸è®¸ï¼ï¼"],
                  imgList = [
                      "https://example.com/img1.gif",
                      "https://example.com/img2.gif",
                      "https://example.com/img3.gif",
                      "https://example.com/img4.gif"
                  ];

            // ç”Ÿæˆéšæœºä½ç½®ï¼ˆé¿å…æŒ‰é’®è¶…å‡ºå±å¹•ï¼‰
            const getRandomPos = (min, max) => Math.floor(Math.random() * (max - min) + min);

            // â€œä¸è¦â€æŒ‰é’®ç‚¹å‡»é€»è¾‘
            $(nBtn).on('click', function() {
                clickCount++;
                // æ¸…é™¤ä¹‹å‰çš„ç§»åŠ¨å®šæ—¶å™¨
                moveInterval && clearInterval(moveInterval);

                // æ›´æ–°æŒ‰é’®æ–‡å­—
                if (clickCount <= 5) {
                    $(this).text(noTexts[clickCount - 1]);
                    // æ›´æ–°å›¾ç‰‡
                    mainImage.src = imgList[Math.min(clickCount, 3)];
                }

                // ç‚¹å‡»3æ¬¡åï¼ŒæŒ‰é’®å¼€å§‹éšæœºç§»åŠ¨
                if (clickCount >= 3) {
                    $(yBtn).text("ä¸å«");
                    moveInterval = setInterval(() => {
                        const maxX = winWidth - nBtn.offsetWidth - 20, // ç•™20pxè¾¹è·
                              maxY = winHeight - nBtn.offsetHeight - 20;
                        $(nBtn).css({
                            position: 'absolute',
                            left: getRandomPos(20, maxX) + 'px',
                            top: getRandomPos(20, maxY) + 'px'
                        });
                    }, 300);

                    // 2ç§’ååœæ­¢ç§»åŠ¨ï¼Œæ¢å¤æŒ‰é’®ä½ç½®
                    setTimeout(() => {
                        $(nBtn).css({ position: 'static' });
                        clearInterval(moveInterval);
                    }, 2000);
                }

                // è°ƒæ•´æŒ‰é’®é¡ºåºï¼ˆâ€œå¯ä»¥â€æŒ‰é’®å§‹ç»ˆåœ¨å·¦ï¼‰
                if (clickCount < 3) {
                    $('.buttons').prepend(yBtn);
                }
            });

            // â€œå¯ä»¥â€æŒ‰é’®ç‚¹å‡»é€»è¾‘
            $(yBtn).on('click', function() {
                const btnText = $(this).text();
                if (btnText === "ä¸å«") {
                    // æ’­æ”¾â€œå“¥å“¥â€éŸ³é¢‘ï¼ˆæœ‰åˆ™æ’­æ”¾ï¼‰
                    bSnd && bSnd.play().catch(err => console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼š', err));
                    // æ›´æ–°å›¾ç‰‡ï¼ˆæ›¿æ¢ä¸ºåº†ç¥å›¾ï¼‰
                    mainImage.src = "https://example.com/celebrate.gif";
                    // æŒ‰é’®æ–‡å­—å˜åŒ–
                    $(this).text("å“¥å“¥");
                    // å»¶è¿Ÿæ’­æ”¾ç¡®è®¤éŸ³é¢‘
                    setTimeout(() => {
                        ySnd && ySnd.play().catch(err => console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼š', err));
                        // æ˜¾ç¤ºåº†ç¥å¼¹çª—ï¼ˆå¯é€‰ï¼‰
                        showCelebratePopup();
                    }, 1900);
                } else {
                    // ç›´æ¥ç‚¹å‡»â€œå¯ä»¥â€çš„é€»è¾‘
                    ySnd && ySnd.play().catch(err => console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼š', err));
                    showCelebratePopup();
                }
            });

            // åº†ç¥å¼¹çª—ï¼ˆç‚¹å‡»â€œå¯ä»¥â€åæ˜¾ç¤ºï¼‰
            function showCelebratePopup() {
                // åˆ›å»ºå¼¹çª—å…ƒç´ 
                const popup = $('<div>').css({
                    position: 'fixed',
                    top: '50%',
                    left: '50%',
                    transform: 'translate(-50%, -50%)',
                    width: '85%',
                    maxWidth: '380px',
                    background: '#ffd1dc',
                    borderRadius: '20px',
                    padding: '25px',
                    boxShadow: '0 10px 30px rgba(0,0,0,0.2)',
                    zIndex: '1000'
                });

                // å¼¹çª—å†…å®¹
                popup.html(`
                    <div style="position:absolute;top:10px;left:15px;">ğŸŒ¸</div>
                    <div style="position:absolute;top:15px;right:20px;">ğŸ’•</div>
                    <h3 style="color:#ff6b6b;margin-bottom:15px;">âœ¨ å¼€å¿ƒï¼ï¼ âœ¨</h3>
                    <p style="font-size:18px;color:#333;margin:20px 0;line-height:1.5;">å¼Ÿå¼Ÿ/å¦¹å¦¹çœŸä¹–ï½</p>
                    <button class="popup-close" style="background:#ff6b6b;color:white;border:none;border-radius:20px;padding:8px 20px;cursor:pointer;">å…³é—­</button>
                    <div style="position:absolute;bottom:10px;right:15px;color:#888;font-size:12px;">â³ 5ç§’åå…³é—­</div>
                `);

                // æ·»åŠ åˆ°é¡µé¢
                $('body').append(popup);

                // å…³é—­æŒ‰é’®é€»è¾‘
                $('.popup-close').on('click', function() {
                    popup.fadeOut(300, function() {
                        popup.remove();
                    });
                });

                // è‡ªåŠ¨å…³é—­
                let countdown = 5;
                const timer = setInterval(() => {
                    countdown--;
                    popup.find('div:last').text(`â³ ${countdown}ç§’åå…³é—­`);
                    if (countdown <= 0) {
                        clearInterval(timer);
                        popup.fadeOut(300, function() {
                            popup.remove();
                        });
                    }
                }, 1000);
            }

            // çª—å£å¤§å°å˜åŒ–æ—¶æ›´æ–°å®½é«˜
            $(window).on('resize', function() {
                winWidth = window.innerWidth;
                winHeight = window.innerHeight;
            });
        });
    </script>
</body>
</html>